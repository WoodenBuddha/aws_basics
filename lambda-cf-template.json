{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Parameters" : {
    "LambdaSourceBucket" : {
		"Type" : "String",
		"Default" : "aws-basics-source-holder",
		"Description" : "Source code location for AWS Lambda"
	},
	"LambdaSourceKeyFirstFunc" : {
		"Type" : "String",
		"Default" : "GetBucketsFunc.zip",
		"Description" : "Source code file for the first task"
	},
	"LambdaSourceKeySecondFunc" : {
		"Type" : "String",
		"Default" : "GetBucketsFunc_second.zip",
		"Description" : "Source code file for the first task"
	},
	"LambdaAdminRoleArn" : {
		"Type" : "String",
		"Default" : "arn:aws:iam::713832208941:role/lambdaS3Admin"
	},
	"LambdaReadOnlyRoleArn" : {
		"Type" : "String",
		"Default" : "arn:aws:iam::713832208941:role/lambdaS3ReadOnly"
	},
	"RuntimeParam" : {
		"Type" : "String",
		"Default" : "python3.7"
	}
  },
  "Resources" : {
    "LambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
		"FunctionName": "f1",
        "Handler": "GetBucketsFunc.lambda_function.lambda_handler",
        "Role": { "Ref" : "LambdaReadOnlyRoleArn" },
        "Code": {
			"S3Bucket": {"Ref" : "LambdaSourceBucket" },
            "S3Key": {"Ref" : "LambdaSourceKeyFirstFunc" }
        },
        "Runtime": {"Ref" : "RuntimeParam" }
      }
    },
	"CreateBucketFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
		"FunctionName": "f2",
        "Handler": "GetBucketsFunc_second.lambda_function.lambda_handler",
        "Role": { "Ref" : "LambdaAdminRoleArn" },
        "Code": {
			"S3Bucket": {"Ref" : "LambdaSourceBucket" },
            "S3Key": {"Ref" : "LambdaSourceKeySecondFunc" }
        },
        "Runtime": {"Ref" : "RuntimeParam" }
      }
    }
  }
}